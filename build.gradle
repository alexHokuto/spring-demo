plugins {
    id 'org.springframework.boot' version '1.4.3.RELEASE'
    id 'java'
    id 'eclipse'
}


archivesBaseName = 'spring-demo'
version = '0.0.1-SNAPSHOT'

repositories {
    jcenter()
}

dependencies {
    compile("org.springframework.boot:spring-boot-starter-web")
}


apply plugin: 'groovy'
apply plugin: 'java'
apply plugin: "base"
apply plugin: "maven"
apply plugin: "maven-publish"

def repoUrl = "http://192.168.1.222:8081/repository/SAMPLE-SNAP/"

version = '1.0.0'
group = 'com.firstfewlines.sample'

repositories {
    maven { url "http://192.168.1.222:8081/repository/SAMPLE-SNAP/" }
}

task assembleArtifact(type: Zip, group: 'DB') {
    archiveName 'db.zip'
    destinationDir file("$buildDir/libs/")
    from "src/main/sql"
    description "Assemble archive $archiveName into ${relativePath(destinationDir)}"
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            artifact source: assembleArtifact, extension: 'zip'
        }
    }
    repositories {
        maven {
            credentials {
                username 'admin'
                password 'admin123'
            }
            url nexusRepo
        }
    }
}

assemble.dependsOn assembleArtifact
   build.dependsOn assemble
 publish.dependsOn build






