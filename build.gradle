plugins {
    id 'org.springframework.boot' version '1.4.3.RELEASE'
    id 'java'
    id 'eclipse'
}


archivesBaseName = 'spring-demo'
version = '0.0.1-SNAPSHOT'

repositories {
    jcenter()
}

dependencies {
    compile("org.springframework.boot:spring-boot-starter-web")
}


apply plugin: 'java'
apply plugin: 'maven-publish'

def repoUrl = "http://192.168.1.222:8081/repository/SAMPLE-SNAP/"

version = '1.0.0'
group = 'com.firstfewlines.sample'

publishing {
    repositories {
        maven {
            credentials {
                username 'admin'
                password 'admin123'
            }
            url "${repoUrl}"
        }
    }
}

publishing {
    publications {
        maven(MavenPublication) {
            groupId 'com.firstfewlines.sample'
            artifactId 'sample'
            version '2.1.4'

            artifact 'build/libs/spring-demo-1.0.0.jar'
            pom.withXml {
                def dependencies = asNode().appendNode('dependencies')
                
                def d = dependencies.appendNode('dependency')
                d.appendNode('groupId', 'org.apache.httpcomponents')
                d.appendNode('artifactId', 'httpclient')
                d.appendNode('version', '4.3.6')
                                
                d = dependencies.appendNode('dependency')
                d.appendNode('groupId', 'org.apache.httpcomponents')
                d.appendNode('artifactId', 'httpcore')
                d.appendNode('version', '4.3.3')
            }
        }
    }
}

